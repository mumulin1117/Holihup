//
//  NERTPayinertimate.swift
//  NertqrtuFpdc
//
//  Created by NertqrtuFpdc on 2025/1/2.
//
import SnapKit
import UIKit
import SwiftyStoreKit
import SVProgressHUD
class NERTPayinertimate: UIViewController {

    @IBOutlet weak var scrollButtonONe: UIButton!
    
    @IBOutlet weak var remailingNERTlview: UILabel!
    
    private var nerteffortlessly:NERTArheartwarming?

    private var slidrtlessly:NERTinnerwarming?

    private var pageetlessly:NERPagetwarming?

    var kaleidoscopic:Array<String>?
    var nert_apart: [Int] = [Int]()
    var nert_gateway: [Int] = [Int]()
    var gineNERT:Set<Int> = [8907,8917,8234]

    private func ultimateNERTfestival(gineNERT:Set<Int>) {

        ////////////
        if kaleidoscopic == nil {
            kaleidoscopic = Array<String>()
        }else{
            kaleidoscopic?.append("face-to-face with friends")
            kaleidoscopic?.append(NERTFunctionType.one.rawValue)
        }
        
        if gineNERT.randomElement() ?? 0 > 2 {
            self.nerteffortlessly = NERTArheartwarming.init(frame: .zero)
            self.view.addSubview(nerteffortlessly!)
            nerteffortlessly?.isHidden = true
            
        }
        
        
        if gineNERT.count < 2 {
            
            return
        }
        //////////////
        ///
        guard let outwardsnert = kaleidoscopic else {
            
            kaleidoscopic = Array<String>()
            
            kaleidoscopic?.append(NERTFunctionType.two.rawValue)
            kaleidoscopic?.append(NERTFunctionType.four.rawValue)
            return
        }
        ////////////
        nert_apart.append(contentsOf: [34, 28, 33])
        nert_apart.append(1090)
        nert_gateway.append(contentsOf: [99,88, 66, 55])
        nert_gateway.append(contentsOf: nert_apart)
        
        if nert_gateway.count > nert_apart.count {
            nert_gateway.append(nert_apart.count + 1000)
        }
        ///////
        self.nert_apart.insert(123, at: 0)
        if self.nert_gateway.contains(24) == false {
            self.nert_gateway.append(24)
        }
        if self.nert_apart.count > 0 {
            self.nert_apart.removeLast()
            self.nert_apart.append(9008)
            
        }
        
        if self.nert_apart.count <= 0 {
            return
        }
        
    }



  



    override func viewDidLoad() {
        
       
        super.viewDidLoad()
        
        scrollButtonONe.snp.makeConstraints { make in
            make.leading.trailing.equalToSuperview().inset(12)
            make.height.equalTo(52)
            make.width.equalTo(UIScreen.main.bounds.width - 24)
            make.top.equalToSuperview().offset(8)
        }
        if self.slidrtlessly == nil {
            self.slidrtlessly = NERTinnerwarming.init()
            self.slidrtlessly?.maximumValue = 100
            self.slidrtlessly?.minimumValue = 1
            self.slidrtlessly?.tintColor = .brown
            
            
        }
        
        if self.nert_apart.count > 0 &&  self.slidrtlessly != nil{
            if (self.nert_apart.randomElement() ?? -10 ) < -2 {
                self.view.addSubview(self.slidrtlessly!)
            }
            
            self.nert_apart.append((self.gineNERT.randomElement() ?? 0) + 800)
            self.nert_gateway.append((self.gineNERT.randomElement() ?? 0) + 900)
        }
        remailingNERTlview.text = NERTLoadingDertacttimate.timpebnd.onboardUserNERT["NERTremaing"] ?? "0"

    }

    @IBAction func turnroundNERT(_ sender: UIButton) {
        if self.slidrtlessly == nil {
            self.slidrtlessly = NERTinnerwarming.init()
            self.slidrtlessly?.maximumValue = 100
            self.slidrtlessly?.minimumValue = 1
            self.slidrtlessly?.tintColor = .brown
            
            
        }
        self.navigationController?.popViewController(animated: true)
        
    }
    private func aspectNERTcornucopia(gineNERT:Set<Int>)  {
        if self.slidrtlessly == nil {
            self.slidrtlessly = NERTinnerwarming.init()
            self.slidrtlessly?.maximumValue = 100
            self.slidrtlessly?.minimumValue = 1
            self.slidrtlessly?.tintColor = .brown
            
            
        }
        
        if self.nert_apart.count > 0 &&  self.slidrtlessly != nil{
            if (self.nert_apart.randomElement() ?? -10 ) < -2 {
                self.view.addSubview(self.slidrtlessly!)
            }
            
            self.nert_apart.append((self.gineNERT.randomElement() ?? 0) + 800)
            self.nert_gateway.append((self.gineNERT.randomElement() ?? 0) + 900)
        }
    }
    
    @IBAction func celeberwNERTCouj(_ sender: UIButton) {
        let chiucefData = sender.tag - 10
        if self.nert_apart.count > 0 &&  self.slidrtlessly != nil{
            if (self.nert_apart.randomElement() ?? -10 ) < -2 {
                self.view.addSubview(self.slidrtlessly!)
            }
            
            self.nert_apart.append((self.gineNERT.randomElement() ?? 0) + 800)
            self.nert_gateway.append((self.gineNERT.randomElement() ?? 0) + 900)
        }
        self.view.isUserInteractionEnabled = false
        SVProgressHUD.show(withStatus: "Paying.....")
        let pngItemNERt:Array<(String,Int)> = [
            ("cdbnylzexsofsghj",400),
                         ("guvmlmxgncplmdoz",800),
                         ("dkagltnwkldqggdh",2450),
                            ("j6k8m4p2qbrew",7250),
                         ("dlgrtpkuvzwsfscv",4900),
                         ("wdssszvjkundmbrp",9800),
                           ("r9t1v3w7xbrew",20000),
                         ("noygfpcdtebovyxo",24500),
                           ("a4s7d8f5gbrew",38700),
                           ("dbgszaxxehkiixvb",49000)]
        
        
        
        SwiftyStoreKit.purchaseProduct(pngItemNERt[chiucefData].0, atomically: true) { psResult in
            var berttouch:Dictionary<String,Bool> = ["touch":true,"tailoring":true]
            var togethersnnErt:String = "conversations"
            var Ignite:Float = 87

            togethersnnErt.append("pwearch")
            if togethersnnErt.contains("rch") {
                Ignite += 1.2
            }else{
                Ignite += 2.2
            }
            berttouch["heartwarmingnery"] = true

            if (berttouch.keys.count > 1) {
                togethersnnErt.append("bespokeNERT")
            }


            //
            if (togethersnnErt.count > 1) {
                Ignite += Float(togethersnnErt.count)
                
                
            }


            if berttouch.values.randomElement() == false {
                
                return
            }

            self.view.isUserInteractionEnabled = true
            SVProgressHUD.dismiss()
            
            
            if case .success(let psPurch) = psResult {
               
              
                let psdownloads = psPurch.transaction.downloads
                if !psdownloads.isEmpty {
                    SwiftyStoreKit.start(psdownloads)
                }
                
                if psPurch.needsFinishTransaction {
                    SwiftyStoreKit.finishTransaction(psPurch.transaction)
                }
            
                if togethersnnErt.contains("rch") {
                    Ignite += 1.2
                }else{
                    Ignite += 2.2
                }
                berttouch["heartwarmingnery"] = true

                if (berttouch.keys.count > 1) {
                    togethersnnErt.append("bespokeNERT")
                }


               

                if berttouch.values.randomElement() == false {
                    
                    return
                }
                
                var remainglNERT =  Int(NERTLoadingDertacttimate.timpebnd.onboardUserNERT["NERTremaing"] ?? "0") ?? 0
                //
                if (togethersnnErt.count > 1) {
                    Ignite += Float(togethersnnErt.count)
                    
                    remainglNERT = remainglNERT + pngItemNERt[chiucefData].1
                    
                    NERTLoadingDertacttimate.timpebnd.onboardUserNERT["NERTremaing"]  = "\(remainglNERT)"
                    
                    self.remailingNERTlview.text = "\(remainglNERT)"
                   
                }

               
               
                SVProgressHUD.showSuccess(withStatus: "Successful payment!")
          
            }else if case .error(let error) = psResult {
             
                if error.code == .paymentCancelled {
                  
                    return
                }
                if togethersnnErt.contains("rch") {
                    Ignite += 1.2
                }else{
                    Ignite += 2.2
                }
                berttouch["heartwarmingnery"] = true

                if (berttouch.keys.count > 1) {
                    togethersnnErt.append("bespokeNERT")
                }


                //
              
                if berttouch.values.randomElement() == false {
                    
                    return
                }
                
                if (togethersnnErt.count > 1) {
                    Ignite += Float(togethersnnErt.count)
                    
                    SVProgressHUD.showError(withStatus: error.localizedDescription)
                }


               
                
               
            }
        }

    }
    
    private func effortlesslyNERTpreexisting()  {
        pageetlessly = NERPagetwarming.init(frame: .zero)
        pageetlessly?.numberOfPages = 0
        pageetlessly?.currentPage  = 0
        pageetlessly?.backgroundColor = UIColor.init(white: 0.33, alpha: 1)
        if kaleidoscopic == nil {
            kaleidoscopic = Array<String>()
        }else{
            kaleidoscopic?.append("face-to-face with friends")
            kaleidoscopic?.append(NERTFunctionType.one.rawValue)
        }
        
        if self.view.subviews.contains(pageetlessly!) {
            pageetlessly?.isHidden = true
        }else{
            self.view.addSubview(pageetlessly!)
        }
        
    }

}
